---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="NFTK – Baza Wiedzy">
  <h2>Wszystkie encje</h2>
  <ul id="entity-list">
    <li>Ładowanie encji...</li>
  </ul>

  <script type="module">
    fetch('/index.json')
      .then(res => res.json())
      .then(data => {
        const list = document.getElementById('entity-list');
        list.innerHTML = '';
        Object.values(data).forEach(entity => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = `/${entity.slug}`;
          a.textContent = `${entity.name} (${entity.type})`;
          li.appendChild(a);
          list.appendChild(li);
        });
      })
      .catch(err => {
        document.getElementById('entity-list').innerHTML = '<li>Błąd ładowania</li>';
      });
  </script>
</BaseLayout>
